<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Test Netlify Function</title>
</head>
<body>
  <h2>APP Version 4.0 -- Додано додаткове логування для чеку на Нетліфай</h2>
  <button onclick="sendTest()">Надіслати тест</button>

  <script>
    async function sendTest() {
      const data = {
        result: {
          orderId: "f2729a74-6dr2-4586-b825-841a546fede2",
          dateCreate: "22.11.2023 13:35",
          deliveryRecipientInfo: {
            first_name: "Василь",
            last_name: "Коваленко",
            phoneNumber: "+38099000000"
          },
          mainClientInfo: {
            first_name: "Василина",
            last_name: "Коваленко",
            phoneNumber: "+38099000000",
            email: "ndrew.frolov@gmail.com"
          },
          delivery_method_desc: "НП відділення",
          delivery_branch_address: "Відділення №128 (ТРЦ Gulliver)",
          amount: 320,
          payment_method_desc: "Оплата карткою",
          payment_status: "успішно",
          paymentDateCreate: "25.09.2023 12:13",
          deliveryAddressInfo: {
            cityName: "Миколаїв",
            areaName: "Миколаївська"
          },
          products: [
            {
              name: "Футболка сіра OBEY THE CATS — XS",
              cnt: 1,
              price: 320
            }
          ]
        }
      };

      try {
        const response = await fetch("https://monocheckout-test.netlify.app/.netlify/functions/mono-callback", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        console.log("✅ Відповідь:", result);
        alert("Успіх: " + JSON.stringify(result));
      } catch (error) {
        console.error("❌ Помилка:", error);
        alert("Помилка: " + error.message);
      }
    }
  </script>
</body>
</html>
