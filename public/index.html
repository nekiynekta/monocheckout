<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Test Netlify Function</title>
</head>
<body>
  <h2>APP Version 7.2 -- змінено колбек_юрл на моно-колбек у чекаут функції</h2>
  <!-- <button onclick="sendTest()">Надіслати тест</button> -->

  <script>
    //Приклад дати Інформації після успішної оплати для тесту відпраки до mono-callback
    async function sendTest() {
      const data = {
        result: {
          "orderId": "9c3def92-fa10-4f4a-932e-d61da4e557ff",
          "dateCreate": "20.05.2025 00:19",
          "basket_id": "ZAM-WHO-EQI4",
          "deliveryRecipientInfo": {
            "first_name": "Andrii",
            "last_name": "Frolov",
            "phoneNumber": "+380661722953"
          },
          "mainClientInfo": {
            "first_name": "Andrii",
            "last_name": "Frolov",
            "phoneNumber": "+380661722953",
            "email": "ndrew.frolov@gmail.com"
          },
          "delivery_method": "np_brnm",
          "delivery_method_desc": "\"Нова пошта\" відділення",
          "delivery_branch_id": "7b422fbe-e1b8-11e3-8c4a-0050568002cf",
          "delivery_branch_address": "Вантажне відділення №2: Київ, Богатирська, 11",
          "delivery_pay_merchant": false,
          "amount": 1,
          "ccy": 980,
          "quantity": 1,
          "order_state": 11,
          "products": [
            {
              "name": "Оверсинкінг. Як побороти тривогу та почати жити тут і зараз",
              "cnt": 1,
              "price": 1
            }
          ],
          "payment_method": "card",
          "payment_method_desc": "Оплата карткою",
          "payment_status": "success",
          "paymentDateCreate": "20.05.2025 00:19",
          "generalStatus": "success",
          "paymentInfo": {
            "rrn": "069095642017",
            "approvalCode": "270383",
            "tranId": "18256740872",
            "terminal": "MI022698",
            "bank": "Універсал Банк",
            "paymentSystem": "visa",
            "country": "804",
            "fee": 1,
            "paymentMethod": "monobank",
            "maskedPan": "44411144******58"
          },
          "invoiceId": "250519AoiZXxaLBNCdUB",
          "delivery_city_id": "8d5a980d-391c-11dd-90d9-001a92567626",
          "deliveryAddressInfo": {
            "cityName": "Київ",
            "cityRef": "8d5a980d-391c-11dd-90d9-001a92567626",
            "cityType": "місто",
            "areaName": "Київська",
            "areaRef": "71508131-9b87-11de-822f-000c2965ae0e"
          },
          "comment": "",
          "destination": "Оплата за замовлення WHO-EQI4"
        }
      };

      try {
        const response = await fetch("https://monocheckout-test.netlify.app/.netlify/functions/mono-callback", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const result = await response.json();
        console.log("✅ Відповідь:", result);
        alert("Успіх: " + JSON.stringify(result));
      } catch (error) {
        console.error("❌ Помилка:", error);
        alert("Помилка: " + error.message);
      }
    }
  </script>
</body>
</html>
